name: Lint YAML
on: [pull_request]

jobs:
  yamllint:
    permissions: write-all
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Run yamllint with reviewdog
        uses: reviewdog/action-yamllint@v1
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          reporter: github-pr-review
          level: error
          yamllint_flags: |
            -d {rules:{
            'braces':enable,'brackets':enable,'colons':enable,
            'commas':enable,'comments':{'level':warning},'comments-indentation':{'level':warning},
            'document-end':disable,'document-start':disable,'empty-lines':enable,
            'empty-values':disable,'hyphens':enable,'indentation':{'spaces':2,'indent-sequences':consistent},
            'key-duplicates':enable,'key-ordering':disable,'line-length':disable,
            'new-line-at-end-of-file':enable,'new-lines':enable,'octal-values':disable,
            'quoted-strings':disable,'trailing-spaces':enable,'truthy':disable
            }} .
